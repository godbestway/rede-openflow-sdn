#!/usr/bin/python

from mininet.topo import Topo
from mininet.net import Mininet
from mininet.node import Node
from mininet.log import setLogLevel, info
from mininet.cli import CLI

class LinuxRouter( Node ):
    "A Node with IP forwarding enabled."

    def config( self, **params ):
        super( LinuxRouter, self).config( **params )
        # Enable forwarding on the router
        self.cmd( 'sysctl net.ipv4.ip_forward=1' )

    def terminate( self ):
        self.cmd( 'sysctl net.ipv4.ip_forward=0' )
        super( LinuxRouter, self ).terminate()


class NetworkTopo( Topo ):
    "A LinuxRouter connecting three IP subnets"

    def build( self, **_opts ):


	defaultIP = '10.0.1.1/24'  # IP address for r0-eth1
        router = self.addNode( 'r0', cls=LinuxRouter, ip=defaultIP )

	h1 = self.addHost( 'h1', ip='10.0.1.2/24', defaultRoute='via 10.0.1.1' )
        h2 = self.addHost( 'h2', ip='10.0.1.3/24', defaultRoute='via 10.0.1.1' )
        h3 = self.addHost( 'h3', ip='10.0.1.4/24', defaultRoute='via 10.0.1.1' )
	h4 = self.addHost( 'h4', ip='10.0.1.5/24', defaultRoute='via 10.0.1.1' )
	h5 = self.addHost( 'h5', ip='10.0.1.6/24', defaultRoute='via 10.0.1.1' )
	h6 = self.addHost( 'h6', ip='10.0.1.7/24', defaultRoute='via 10.0.1.1' )
	h7 = self.addHost( 'h7', ip='10.0.1.8/24', defaultRoute='via 10.0.1.1' )
	h8 = self.addHost( 'h8', ip='10.0.1.9/24', defaultRoute='via 10.0.1.1' )
	h9 = self.addHost( 'h9', ip='10.0.1.10/24', defaultRoute='via 10.0.1.1' )
	h10 = self.addHost( 'h10', ip='10.1.2.11/24', defaultRoute='via 10.0.1.1' )

	h11 = self.addHost( 'h11', ip='10.0.1.12/24', defaultRoute='via 10.0.1.1' )
        h12 = self.addHost( 'h12', ip='10.0.1.13/24', defaultRoute='via 10.0.1.1' )
        h13 = self.addHost( 'h13', ip='10.0.1.14/24', defaultRoute='via 10.0.1.1' )
	h14 = self.addHost( 'h14', ip='10.0.1.15/24', defaultRoute='via 10.0.1.1' )
	h15 = self.addHost( 'h15', ip='10.0.1.16/24', defaultRoute='via 10.0.1.1' )
	h16 = self.addHost( 'h16', ip='10.0.1.17/24', defaultRoute='via 10.0.1.1' )
	h17 = self.addHost( 'h17', ip='10.0.1.18/24', defaultRoute='via 10.0.1.1' )
	h18 = self.addHost( 'h18', ip='10.0.1.19/24', defaultRoute='via 10.0.1.1' )
	h19 = self.addHost( 'h19', ip='10.0.1.20/24', defaultRoute='via 10.0.1.1' )
	h20 = self.addHost( 'h20', ip='10.0.1.21/24', defaultRoute='via 10.0.1.1' )

	h21 = self.addHost( 'h21', ip='10.0.1.22/24', defaultRoute='via 10.0.1.1' )
        h22 = self.addHost( 'h22', ip='10.0.1.23/24', defaultRoute='via 10.0.1.1' )
        h23 = self.addHost( 'h23', ip='10.0.1.24/24', defaultRoute='via 10.0.1.1' )
	h24 = self.addHost( 'h24', ip='10.0.1.25/24', defaultRoute='via 10.0.1.1' )
	h25 = self.addHost( 'h25', ip='10.0.1.26/24', defaultRoute='via 10.0.1.1' )
	h26 = self.addHost( 'h26', ip='10.0.1.27/24', defaultRoute='via 10.0.1.1' )
	h27 = self.addHost( 'h27', ip='10.0.1.28/24', defaultRoute='via 10.0.1.1' )
	h28 = self.addHost( 'h28', ip='10.0.1.29/24', defaultRoute='via 10.0.1.1' )
	h29 = self.addHost( 'h29', ip='10.0.1.30/24', defaultRoute='via 10.0.1.1' )
	h30 = self.addHost( 'h30', ip='10.0.1.31/24', defaultRoute='via 10.0.1.1' )

	h31 = self.addHost( 'h31', ip='10.0.1.32/24', defaultRoute='via 10.0.1.1' )
        h32 = self.addHost( 'h32', ip='10.0.1.33/24', defaultRoute='via 10.0.1.1' )
        h33 = self.addHost( 'h33', ip='10.0.1.34/24', defaultRoute='via 10.0.1.1' )
	h34 = self.addHost( 'h34', ip='10.0.1.35/24', defaultRoute='via 10.0.1.1' )
	h35 = self.addHost( 'h35', ip='10.0.1.36/24', defaultRoute='via 10.0.1.1' )
	h36 = self.addHost( 'h36', ip='10.0.1.37/24', defaultRoute='via 10.0.1.1' )
	h37 = self.addHost( 'h37', ip='10.0.1.38/24', defaultRoute='via 10.0.1.1' )
	h38 = self.addHost( 'h38', ip='10.0.1.39/24', defaultRoute='via 10.0.1.1' )
	h39 = self.addHost( 'h39', ip='10.0.1.40/24', defaultRoute='via 10.0.1.1' )
	h40 = self.addHost( 'h40', ip='10.0.1.41/24', defaultRoute='via 10.0.1.1' )

	h41 = self.addHost( 'h41', ip='10.0.1.42/24', defaultRoute='via 10.0.1.1' )
        h42 = self.addHost( 'h42', ip='10.0.1.43/24', defaultRoute='via 10.0.1.1' )
        h43 = self.addHost( 'h43', ip='10.0.1.44/24', defaultRoute='via 10.0.1.1' )
	h44 = self.addHost( 'h44', ip='10.0.1.45/24', defaultRoute='via 10.0.1.1' )
	h45 = self.addHost( 'h45', ip='10.0.1.46/24', defaultRoute='via 10.0.1.1' )
	h46 = self.addHost( 'h46', ip='10.0.1.47/24', defaultRoute='via 10.0.1.1' )
	h47 = self.addHost( 'h47', ip='10.0.1.48/24', defaultRoute='via 10.0.1.1' )
	h48 = self.addHost( 'h48', ip='10.0.1.49/24', defaultRoute='via 10.0.1.1' )
	h49 = self.addHost( 'h49', ip='10.0.1.50/24', defaultRoute='via 10.0.1.1' )
	h50 = self.addHost( 'h50', ip='10.0.1.51/24', defaultRoute='via 10.0.1.1' )

	h51 = self.addHost( 'h51', ip='10.0.1.52/24', defaultRoute='via 10.0.1.1' )
        h52 = self.addHost( 'h52', ip='10.0.1.53/24', defaultRoute='via 10.0.1.1' )
        h53 = self.addHost( 'h53', ip='10.0.1.54/24', defaultRoute='via 10.0.1.1' )
	h54 = self.addHost( 'h54', ip='10.0.1.55/24', defaultRoute='via 10.0.1.1' )
	h55 = self.addHost( 'h55', ip='10.0.1.56/24', defaultRoute='via 10.0.1.1' )
	h56 = self.addHost( 'h56', ip='10.0.1.67/24', defaultRoute='via 10.0.1.1' )
	h57 = self.addHost( 'h57', ip='10.0.1.58/24', defaultRoute='via 10.0.1.1' )
	h58 = self.addHost( 'h58', ip='10.0.1.59/24', defaultRoute='via 10.0.1.1' )
	h59 = self.addHost( 'h59', ip='10.0.1.60/24', defaultRoute='via 10.0.1.1' )
	h60 = self.addHost( 'h60', ip='10.0.1.61/24', defaultRoute='via 10.0.1.1' )

	h61 = self.addHost( 'h61', ip='10.0.1.62/24', defaultRoute='via 10.0.1.1' )
        h62 = self.addHost( 'h62', ip='10.0.1.63/24', defaultRoute='via 10.0.1.1' )
        h63 = self.addHost( 'h63', ip='10.0.1.64/24', defaultRoute='via 10.0.1.1' )
	h64 = self.addHost( 'h64', ip='10.0.1.65/24', defaultRoute='via 10.0.1.1' )
	h65 = self.addHost( 'h65', ip='10.0.1.66/24', defaultRoute='via 10.0.1.1' )
	h66 = self.addHost( 'h66', ip='10.0.1.67/24', defaultRoute='via 10.0.1.1' )
	h67 = self.addHost( 'h67', ip='10.0.1.68/24', defaultRoute='via 10.0.1.1' )
	h68 = self.addHost( 'h68', ip='10.0.1.69/24', defaultRoute='via 10.0.1.1' )
	h69 = self.addHost( 'h69', ip='10.0.1.70/24', defaultRoute='via 10.0.1.1' )
	h70 = self.addHost( 'h70', ip='10.0.1.71/24', defaultRoute='via 10.0.1.1' )

	h71 = self.addHost( 'h71', ip='10.0.1.72/24', defaultRoute='via 10.0.1.1' )
        h72 = self.addHost( 'h72', ip='10.0.1.73/24', defaultRoute='via 10.0.1.1' )
        h73 = self.addHost( 'h73', ip='10.0.1.74/24', defaultRoute='via 10.0.1.1' )
	h74 = self.addHost( 'h74', ip='10.0.1.75/24', defaultRoute='via 10.0.1.1' )
	h75 = self.addHost( 'h75', ip='10.0.1.76/24', defaultRoute='via 10.0.1.1' )
	h76 = self.addHost( 'h76', ip='10.0.1.77/24', defaultRoute='via 10.0.1.1' )
	h77 = self.addHost( 'h77', ip='10.0.1.78/24', defaultRoute='via 10.0.1.1' )
	h78 = self.addHost( 'h78', ip='10.0.1.79/24', defaultRoute='via 10.0.1.1' )
	h79 = self.addHost( 'h79', ip='10.0.1.80/24', defaultRoute='via 10.0.1.1' )
	h80 = self.addHost( 'h80', ip='10.0.1.81/24', defaultRoute='via 10.0.1.1' )

	h81 = self.addHost( 'h81', ip='10.0.1.82/24', defaultRoute='via 10.0.1.1' )
        h82 = self.addHost( 'h82', ip='10.0.1.83/24', defaultRoute='via 10.0.1.1' )
        h83 = self.addHost( 'h83', ip='10.0.1.84/24', defaultRoute='via 10.0.1.1' )
	h84 = self.addHost( 'h84', ip='10.0.1.85/24', defaultRoute='via 10.0.1.1' )
	h85 = self.addHost( 'h85', ip='10.0.1.86/24', defaultRoute='via 10.0.1.1' )
	h86 = self.addHost( 'h86', ip='10.0.1.87/24', defaultRoute='via 10.0.1.1' )
	h87 = self.addHost( 'h87', ip='10.0.1.88/24', defaultRoute='via 10.0.1.1' )
	h88 = self.addHost( 'h88', ip='10.0.1.89/24', defaultRoute='via 10.0.1.1' )
	h89 = self.addHost( 'h89', ip='10.0.1.90/24', defaultRoute='via 10.0.1.1' )
	h90 = self.addHost( 'h90', ip='10.0.1.91/24', defaultRoute='via 10.0.1.1' )

	h91 = self.addHost( 'h91', ip='10.0.1.92/24', defaultRoute='via 10.0.1.1' )
        h92 = self.addHost( 'h92', ip='10.0.1.93/24', defaultRoute='via 10.0.1.1' )
        h93 = self.addHost( 'h93', ip='10.0.1.94/24', defaultRoute='via 10.0.1.1' )
	h94 = self.addHost( 'h94', ip='10.0.1.95/24', defaultRoute='via 10.0.1.1' )
	h95 = self.addHost( 'h95', ip='10.0.1.96/24', defaultRoute='via 10.0.1.1' )
	h96 = self.addHost( 'h96', ip='10.0.1.97/24', defaultRoute='via 10.0.1.1' )
	h97 = self.addHost( 'h97', ip='10.0.1.98/24', defaultRoute='via 10.0.1.1' )
	h98 = self.addHost( 'h98', ip='10.0.1.99/24', defaultRoute='via 10.0.1.1' )
	h99 = self.addHost( 'h99', ip='10.0.1.100/24', defaultRoute='via 10.0.1.1' )
	h100 = self.addHost( 'h100', ip='10.0.1.101/24', defaultRoute='via 10.0.1.1' )


        s1 = self.addSwitch('s1')

 	s2 = self.addSwitch('s2')

 	s3 = self.addSwitch('s3')

 	s4 = self.addSwitch('s4')

 	s5 = self.addSwitch('s5')

 	s6 = self.addSwitch('s6')
 	
 	s7 = self.addSwitch('s7')

 	s8 = self.addSwitch('s8')
    
 	s9 = self.addSwitch('s9')

 	s10 = self.addSwitch('s10')
 	
 	s11 = self.addSwitch('s11')

 	s12 = self.addSwitch('s12')
 	
 	s13 = self.addSwitch('s13')

	s14 = self.addSwitch('s14')

	s15 = self.addSwitch('s15')

	self.addLink( s1, router, intfName2='r0-eth1', params2={ 'ip' : '10.0.1.1/24' } )

 	self.addLink(h1, s2)
 	self.addLink(h2, s2)
	self.addLink(h3, s2)
	self.addLink(h4, s2)
	self.addLink(h5, s2)
	self.addLink(h6, s2)
	self.addLink(h7, s2)
        self.addLink(h8, s2)
        self.addLink(h9, s2)
	
	self.addLink(h10, s3)
 	self.addLink(h11, s3)
	self.addLink(h12, s3)
	self.addLink(h13, s3)
	self.addLink(h14, s3)
	self.addLink(h15, s3)
	self.addLink(h16, s3)
        self.addLink(h17, s3)
        self.addLink(h18, s3)

	self.addLink(h19, s4)
 	self.addLink(h20, s4)
	self.addLink(h21, s4)
	self.addLink(h22, s4)
	self.addLink(h23, s4)
	self.addLink(h24, s4)
	self.addLink(h25, s4)
        self.addLink(h26, s4)
        self.addLink(h27, s4)

	self.addLink(h28, s5)
 	self.addLink(h29, s5)
	self.addLink(h30, s5)
	self.addLink(h31, s5)
	self.addLink(h32, s5)
	self.addLink(h33, s5)
	self.addLink(h34, s5)
        self.addLink(h35, s5)
        self.addLink(h36, s5)

	self.addLink(h37, s6)
 	self.addLink(h38, s6)
	self.addLink(h39, s6)
	self.addLink(h40, s6)
	self.addLink(h41, s6)
	self.addLink(h42, s6)
	self.addLink(h43, s6)
        self.addLink(h44, s6)
        self.addLink(h45, s6)

	self.addLink(h46, s7)
 	self.addLink(h47, s7)
	self.addLink(h48, s7)
	self.addLink(h49, s7)
	self.addLink(h50, s7)
	self.addLink(h51, s7)
	self.addLink(h52, s7)
        self.addLink(h53, s7)
        self.addLink(h54, s7)

	self.addLink(h55, s8)
 	self.addLink(h56, s8)
	self.addLink(h57, s8)
	self.addLink(h58, s8)
	self.addLink(h59, s8)
	self.addLink(h60, s8)
	self.addLink(h61, s8)
        self.addLink(h62, s8)
        self.addLink(h63, s8)

	self.addLink(h64, s9)
 	self.addLink(h65, s9)
	self.addLink(h66, s9)
	self.addLink(h67, s9)
	self.addLink(h68, s9)
	self.addLink(h69, s9)
	self.addLink(h70, s9)
        self.addLink(h71, s9)
        self.addLink(h72, s9)

	self.addLink(h73, s10)
 	self.addLink(h74, s10)
	self.addLink(h75, s10)
	self.addLink(h76, s10)
	self.addLink(h77, s10)
	self.addLink(h78, s10)
	self.addLink(h79, s10)
        self.addLink(h80, s10)
        self.addLink(h81, s10)

	self.addLink(h82, s11)
 	self.addLink(h83, s11)
	self.addLink(h84, s11)
	self.addLink(h85, s11)
	self.addLink(h86, s11)
	self.addLink(h87, s11)
	self.addLink(h88, s11)
        self.addLink(h89, s11)
        self.addLink(h90, s11)

	self.addLink(h91, s12)
 	self.addLink(h92, s12)
	self.addLink(h93, s12)
	self.addLink(h94, s12)
	self.addLink(h95, s12)
	self.addLink(h96, s12)
	self.addLink(h97, s12)
        self.addLink(h98, s12)
        self.addLink(h99, s12)
	self.addLink(h100, s13)

	self.addLink(s2, s14)
	self.addLink(s3, s14)
	self.addLink(s4, s14)
	self.addLink(s5, s14)
	self.addLink(s6, s14)
	self.addLink(s7, s14)

	self.addLink(s8, s15)
	self.addLink(s9, s15)
	self.addLink(s10, s15)
	self.addLink(s11, s15)
	self.addLink(s12, s15)
	self.addLink(s13, s15)

	self.addLink(s14, s1)
	self.addLink(s15, s1)

	defaultIP2 = '10.0.2.1/24'  # IP address for r1-eth2
        router = self.addNode( 'r1', cls=LinuxRouter, ip=defaultIP2 )


        h101 = self.addHost( 'h101', ip='10.0.2.2/24', defaultRoute='via 10.0.2.1' )
        h102 = self.addHost( 'h102', ip='10.0.2.3/24', defaultRoute='via 10.0.2.1' )
        h103 = self.addHost( 'h103', ip='10.0.2.4/24', defaultRoute='via 10.0.2.1' )
	h104 = self.addHost( 'h104', ip='10.0.2.5/24', defaultRoute='via 10.0.2.1' )
	h105 = self.addHost( 'h105', ip='10.0.2.6/24', defaultRoute='via 10.0.2.1' )
	h106 = self.addHost( 'h106', ip='10.0.2.7/24', defaultRoute='via 10.0.2.1' )
	h107 = self.addHost( 'h107', ip='10.0.2.8/24', defaultRoute='via 10.0.2.1' )
	h108 = self.addHost( 'h108', ip='10.0.2.9/24', defaultRoute='via 10.0.2.1' )
	h109 = self.addHost( 'h109', ip='10.0.2.10/24', defaultRoute='via 10.0.2.1' )
	h110 = self.addHost( 'h110', ip='10.0.2.11/24', defaultRoute='via 10.0.2.1' )

	h111 = self.addHost( 'h111', ip='10.0.2.12/24', defaultRoute='via 10.0.2.1' )
        h112 = self.addHost( 'h112', ip='10.0.2.13/24', defaultRoute='via 10.0.2.1' )
        h113 = self.addHost( 'h113', ip='10.0.2.14/24', defaultRoute='via 10.0.2.1' )
	h114 = self.addHost( 'h114', ip='10.0.2.15/24', defaultRoute='via 10.0.2.1' )
	h115 = self.addHost( 'h115', ip='10.0.2.16/24', defaultRoute='via 10.0.2.1' )
	h116 = self.addHost( 'h116', ip='10.0.2.17/24', defaultRoute='via 10.0.2.1' )
	h117 = self.addHost( 'h117', ip='10.0.2.18/24', defaultRoute='via 10.0.2.1' )
	h118 = self.addHost( 'h118', ip='10.0.2.19/24', defaultRoute='via 10.0.2.1' )
	h119 = self.addHost( 'h119', ip='10.0.2.20/24', defaultRoute='via 10.0.2.1' )
	h120 = self.addHost( 'h120', ip='10.0.2.21/24', defaultRoute='via 10.0.2.1' )

	h121 = self.addHost( 'h121', ip='10.0.2.22/24', defaultRoute='via 10.0.2.1' )
        h122 = self.addHost( 'h122', ip='10.0.2.23/24', defaultRoute='via 10.0.2.1' )
        h123 = self.addHost( 'h123', ip='10.0.2.24/24', defaultRoute='via 10.0.2.1' )
	h124 = self.addHost( 'h124', ip='10.0.2.25/24', defaultRoute='via 10.0.2.1' )
	h125 = self.addHost( 'h125', ip='10.0.2.26/24', defaultRoute='via 10.0.2.1' )
	h126 = self.addHost( 'h126', ip='10.0.2.27/24', defaultRoute='via 10.0.2.1' )
	h127 = self.addHost( 'h127', ip='10.0.2.28/24', defaultRoute='via 10.0.2.1' )
	h128 = self.addHost( 'h128', ip='10.0.2.29/24', defaultRoute='via 10.0.2.1' )
	h129 = self.addHost( 'h129', ip='10.0.2.30/24', defaultRoute='via 10.0.2.1' )
	h130 = self.addHost( 'h130', ip='10.0.2.31/24', defaultRoute='via 10.0.2.1' )

	h131 = self.addHost( 'h131', ip='10.0.2.32/24', defaultRoute='via 10.0.2.1' )
        h132 = self.addHost( 'h132', ip='10.0.2.33/24', defaultRoute='via 10.0.2.1' )
        h133 = self.addHost( 'h133', ip='10.0.2.34/24', defaultRoute='via 10.0.2.1' )
	h134 = self.addHost( 'h134', ip='10.0.2.35/24', defaultRoute='via 10.0.2.1' )
	h135 = self.addHost( 'h135', ip='10.0.2.36/24', defaultRoute='via 10.0.2.1' )
	h136 = self.addHost( 'h136', ip='10.0.2.37/24', defaultRoute='via 10.0.2.1' )
	h137 = self.addHost( 'h137', ip='10.0.2.38/24', defaultRoute='via 10.0.2.1' )
	h138 = self.addHost( 'h138', ip='10.0.2.39/24', defaultRoute='via 10.0.2.1' )
	h139 = self.addHost( 'h139', ip='10.0.2.40/24', defaultRoute='via 10.0.2.1' )
	h140 = self.addHost( 'h140', ip='10.0.2.41/24', defaultRoute='via 10.0.2.1' )

	h141 = self.addHost( 'h141', ip='10.0.2.42/24', defaultRoute='via 10.0.2.1' )
        h142 = self.addHost( 'h142', ip='10.0.2.43/24', defaultRoute='via 10.0.2.1' )
        h143 = self.addHost( 'h143', ip='10.0.2.44/24', defaultRoute='via 10.0.2.1' )
	h144 = self.addHost( 'h144', ip='10.0.2.45/24', defaultRoute='via 10.0.2.1' )
	h145 = self.addHost( 'h145', ip='10.0.2.46/24', defaultRoute='via 10.0.2.1' )
	h146 = self.addHost( 'h146', ip='10.0.2.47/24', defaultRoute='via 10.0.2.1' )
	h147 = self.addHost( 'h147', ip='10.0.2.48/24', defaultRoute='via 10.0.2.1' )
	h148 = self.addHost( 'h148', ip='10.0.2.49/24', defaultRoute='via 10.0.2.1' )
	h149 = self.addHost( 'h149', ip='10.0.2.50/24', defaultRoute='via 10.0.2.1' )
	h150 = self.addHost( 'h150', ip='10.0.2.51/24', defaultRoute='via 10.0.2.1' )

	h151 = self.addHost( 'h151', ip='10.0.2.52/24', defaultRoute='via 10.0.2.1' )
        h152 = self.addHost( 'h152', ip='10.0.2.53/24', defaultRoute='via 10.0.2.1' )
        h153 = self.addHost( 'h153', ip='10.0.2.54/24', defaultRoute='via 10.0.2.1' )
	h154 = self.addHost( 'h154', ip='10.0.2.55/24', defaultRoute='via 10.0.2.1' )
	h155 = self.addHost( 'h155', ip='10.0.2.56/24', defaultRoute='via 10.0.2.1' )
	h156 = self.addHost( 'h156', ip='10.0.2.57/24', defaultRoute='via 10.0.2.1' )
	h157 = self.addHost( 'h157', ip='10.0.2.58/24', defaultRoute='via 10.0.2.1' )
	h158 = self.addHost( 'h158', ip='10.0.2.59/24', defaultRoute='via 10.0.2.1' )
	h159 = self.addHost( 'h159', ip='10.0.2.60/24', defaultRoute='via 10.0.2.1' )
	h160 = self.addHost( 'h160', ip='10.0.2.61/24', defaultRoute='via 10.0.2.1' )

	h161 = self.addHost( 'h161', ip='10.0.2.62/24', defaultRoute='via 10.0.2.1' )
        h162 = self.addHost( 'h162', ip='10.0.2.63/24', defaultRoute='via 10.0.2.1' )
        h163 = self.addHost( 'h163', ip='10.0.2.64/24', defaultRoute='via 10.0.2.1' )
	h164 = self.addHost( 'h164', ip='10.0.2.65/24', defaultRoute='via 10.0.2.1' )
	h165 = self.addHost( 'h165', ip='10.0.2.66/24', defaultRoute='via 10.0.2.1' )
	h166 = self.addHost( 'h166', ip='10.0.2.67/24', defaultRoute='via 10.0.2.1' )
	h167 = self.addHost( 'h167', ip='10.0.2.68/24', defaultRoute='via 10.0.2.1' )
	h168 = self.addHost( 'h168', ip='10.0.2.69/24', defaultRoute='via 10.0.2.1' )
	h169 = self.addHost( 'h169', ip='10.0.2.70/24', defaultRoute='via 10.0.2.1' )
	h170 = self.addHost( 'h170', ip='10.0.2.71/24', defaultRoute='via 10.0.2.1' )

	h171 = self.addHost( 'h171', ip='10.0.2.72/24', defaultRoute='via 10.0.2.1' )
        h172 = self.addHost( 'h172', ip='10.0.2.73/24', defaultRoute='via 10.0.2.1' )
        h173 = self.addHost( 'h173', ip='10.0.2.74/24', defaultRoute='via 10.0.2.1' )
	h174 = self.addHost( 'h174', ip='10.0.2.75/24', defaultRoute='via 10.0.2.1' )
	h175 = self.addHost( 'h175', ip='10.0.2.76/24', defaultRoute='via 10.0.2.1' )
	h176 = self.addHost( 'h176', ip='10.0.2.77/24', defaultRoute='via 10.0.2.1' )
	h177 = self.addHost( 'h177', ip='10.0.2.78/24', defaultRoute='via 10.0.2.1' )
	h178 = self.addHost( 'h178', ip='10.0.2.79/24', defaultRoute='via 10.0.2.1' )
	h179 = self.addHost( 'h179', ip='10.0.2.80/24', defaultRoute='via 10.0.2.1' )
	h180 = self.addHost( 'h180', ip='10.0.2.81/24', defaultRoute='via 10.0.2.1' )

	h181 = self.addHost( 'h181', ip='10.0.2.82/24', defaultRoute='via 10.0.2.1' )
        h182 = self.addHost( 'h182', ip='10.0.2.83/24', defaultRoute='via 10.0.2.1' )
        h183 = self.addHost( 'h183', ip='10.0.2.84/24', defaultRoute='via 10.0.2.1' )
	h184 = self.addHost( 'h184', ip='10.0.2.85/24', defaultRoute='via 10.0.2.1' )
	h185 = self.addHost( 'h185', ip='10.0.2.86/24', defaultRoute='via 10.0.2.1' )
	h186 = self.addHost( 'h186', ip='10.0.2.87/24', defaultRoute='via 10.0.2.1' )
	h187 = self.addHost( 'h187', ip='10.0.2.88/24', defaultRoute='via 10.0.2.1' )
	h188 = self.addHost( 'h188', ip='10.0.2.89/24', defaultRoute='via 10.0.2.1' )
	h189 = self.addHost( 'h189', ip='10.0.2.90/24', defaultRoute='via 10.0.2.1' )
	h190 = self.addHost( 'h190', ip='10.0.2.91/24', defaultRoute='via 10.0.2.1' )
	
	h191 = self.addHost( 'h191', ip='10.0.2.92/24', defaultRoute='via 10.0.2.1' )
        h192 = self.addHost( 'h192', ip='10.0.2.93/24', defaultRoute='via 10.0.2.1' )
        h193 = self.addHost( 'h193', ip='10.0.2.94/24', defaultRoute='via 10.0.2.1' )
	h194 = self.addHost( 'h194', ip='10.0.2.95/24', defaultRoute='via 10.0.2.1' )
	h195 = self.addHost( 'h195', ip='10.0.2.96/24', defaultRoute='via 10.0.2.1' )
	h196 = self.addHost( 'h196', ip='10.0.2.97/24', defaultRoute='via 10.0.2.1' )
	h197 = self.addHost( 'h197', ip='10.0.2.98/24', defaultRoute='via 10.0.2.1' )
	h198 = self.addHost( 'h198', ip='10.0.2.99/24', defaultRoute='via 10.0.2.1' )
	h199 = self.addHost( 'h199', ip='10.0.2.100/24', defaultRoute='via 10.0.2.1' )
	h200 = self.addHost( 'h200', ip='10.0.2.101/24', defaultRoute='via 10.0.2.1' )


 	s16 = self.addSwitch('s16')

 	s17 = self.addSwitch('s17')

 	s18 = self.addSwitch('s18')

 	s19 = self.addSwitch('s19')

 	s20 = self.addSwitch('s20')
 	
 	s21 = self.addSwitch('s21')

 	s22 = self.addSwitch('s22')
    
 	s23 = self.addSwitch('s23')

 	s24 = self.addSwitch('s24')
 	
 	s25 = self.addSwitch('s25')

 	s26 = self.addSwitch('s26')

 	s27 = self.addSwitch('s27')

 	s28 = self.addSwitch('s28')

	s29 = self.addSwitch('s29')

	s30 = self.addSwitch('s30')

        self.addLink( s30, router, intfName2='r1-eth2', params2={ 'ip' : '10.0.2.1/24' } )

 	self.addLink(h101, s16)
 	self.addLink(h102, s16)
	self.addLink(h103, s16)
	self.addLink(h104, s16)
	self.addLink(h105, s16)
	self.addLink(h106, s16)
	self.addLink(h107, s16)
        self.addLink(h108, s16)
        self.addLink(h109, s16)
	
	self.addLink(h110, s17)
 	self.addLink(h111, s17)
	self.addLink(h112, s17)
	self.addLink(h113, s17)
	self.addLink(h114, s17)
	self.addLink(h115, s17)
	self.addLink(h116, s17)
        self.addLink(h117, s17)
        self.addLink(h118, s17)

	self.addLink(h119, s18)
 	self.addLink(h120, s18)
	self.addLink(h121, s18)
	self.addLink(h122, s18)
	self.addLink(h123, s18)
	self.addLink(h124, s18)
	self.addLink(h125, s18)
        self.addLink(h126, s18)
        self.addLink(h127, s18)

	self.addLink(h128, s19)
 	self.addLink(h129, s19)
	self.addLink(h130, s19)
	self.addLink(h131, s19)
	self.addLink(h132, s19)
	self.addLink(h133, s19)
	self.addLink(h134, s19)
        self.addLink(h135, s19)
        self.addLink(h136, s19)

	self.addLink(h137, s20)
 	self.addLink(h138, s20)
	self.addLink(h139, s20)
	self.addLink(h140, s20)
	self.addLink(h141, s20)
	self.addLink(h142, s20)
	self.addLink(h143, s20)
        self.addLink(h144, s20)
        self.addLink(h145, s20)

	self.addLink(h146, s21)
 	self.addLink(h147, s21)
	self.addLink(h148, s21)
	self.addLink(h149, s21)
	self.addLink(h150, s21)
	self.addLink(h151, s21)
	self.addLink(h152, s21)
        self.addLink(h153, s21)
        self.addLink(h154, s21)

	self.addLink(h155, s22)
 	self.addLink(h156, s22)
	self.addLink(h157, s22)
	self.addLink(h158, s22)
	self.addLink(h159, s22)
	self.addLink(h160, s22)
	self.addLink(h161, s22)
        self.addLink(h162, s22)
        self.addLink(h163, s22)

	self.addLink(h164, s23)
 	self.addLink(h165, s23)
	self.addLink(h166, s23)
	self.addLink(h167, s23)
	self.addLink(h168, s23)
	self.addLink(h169, s23)
	self.addLink(h170, s23)
        self.addLink(h171, s23)
        self.addLink(h172, s23)

	self.addLink(h173, s24)
 	self.addLink(h174, s24)
	self.addLink(h175, s24)
	self.addLink(h176, s24)
	self.addLink(h177, s24)
	self.addLink(h178, s24)
	self.addLink(h179, s24)
        self.addLink(h180, s24)
        self.addLink(h181, s24)

	self.addLink(h182, s25)
 	self.addLink(h183, s25)
	self.addLink(h184, s25)
	self.addLink(h185, s25)
	self.addLink(h186, s25)
	self.addLink(h187, s25)
	self.addLink(h188, s25)
        self.addLink(h189, s25)
        self.addLink(h190, s25)

	self.addLink(h191, s26)
 	self.addLink(h192, s26)
	self.addLink(h193, s26)
	self.addLink(h194, s26)
	self.addLink(h195, s26)
	self.addLink(h196, s26)
	self.addLink(h197, s26)
        self.addLink(h198, s26)
        self.addLink(h199, s26)
	self.addLink(h200, s27)

	self.addLink(s16, s28)
	self.addLink(s17, s28)
	self.addLink(s18, s28)
	self.addLink(s19, s28)
	self.addLink(s20, s28)
	self.addLink(s21, s28)

	self.addLink(s22, s29)
	self.addLink(s23, s29)
	self.addLink(s24, s29)
	self.addLink(s25, s29)
	self.addLink(s26, s29)
	self.addLink(s27, s29)

	self.addLink(s28, s30)
	self.addLink(s29, s30)
	
def run():
    "Test linux router"
    topo = NetworkTopo()
    net = Mininet(topo = topo)
    net.start()
    info('*** Routing Table on Router:\nR1:\n')
    info(net['r0'].cmd('route'))
    info('\nR2:\n')
    info(net['r1'].cmd('route'))
    CLI(net)
    net.stop()

if __name__ == '__main__':
    setLogLevel( 'info' )
    run()
